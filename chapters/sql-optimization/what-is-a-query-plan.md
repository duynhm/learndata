---
title: What is a Query Plan
meta_title: Learn what a Query Plan is
description: Query Plan's are the code that SQL runs on your database. Learn how the
  query plan works and how to optimize your SQL queries. Learn more
section: Query Optimizations
number: 1
authors:
- _people/matthew-layne.md
reviewers:
- _people/blake.md
- _people/matt.md
feedback_doc_url: https://docs.google.com/document/d/1UcOvqq_7wwxeztReW9WIBY8cJpvCapQtqYfe54JzDmc/edit?usp=sharing
image: /assets/images/sql-optimization/whatsQueryPlan/whatsQueryPlan_2.png
is_featured: false
img_border_on_default: false
is_under_construction: false

---
A Query plan is a list of instructions that the database needs to follow in order to execute a query on the data.

Below is an example query plan for a given query:

![Shows a query plan and points out the key parts: costs, rows, data size, and the method being used](/assets/images/sql-optimization/whatsQueryPlan/whatsQueryPlan_1.png)

This query plan shows the particular steps taken to execute the given command. It also specifies the expected cost for each section.

## Video
<iframe width="640" height="360" src="https://www.youtube-nocookie.com/embed/1qVp8ePIMjs?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## The Query Optimizer

SQL is a declarative language. This means that SQL queries describe what the user wants and then the query is transformed into executable commands by the Query Optimizer. Those executable commands are known as Query Plans.

The Query Optimizer generates multiple Query Plans for a single query and determines the most efficient plan to run.

![Graphic showing how the query optimizer creates query plans and selects the best plan](/assets/images/sql-optimization/whatsQueryPlan/whatsQueryPlan_2.png)

There are often many different ways to search a database. Take for example the following database of tools that has five entries. Each entry has a unique ID number and a non-unique name.

![Table containing an ID column and a Name column. the IDs are the numbers 1-5. The names are: Callipers, Hammer, Screwdriver, Wrench, and Hammer.](/assets/images/sql-optimization/whatsQueryPlan/whatsQueryPlan_3.png)

In order to find a particular tool, there are several possible queries that could be run. For example, the query:

```sql
SELECT *
FROM tools
WHERE name='Screwdriver';
```
Will return the same thing as the query:

```sql
SELECT *
FROM tools
WHERE id=3;
```

### Scan Vs. Seek

These queries will return the same results, but may have different final query plans. The first query will have a query plan that uses a sequential scan. This means that all five rows of the database will be checked to see if the name is screwdriver and, when run, would look like the following table:

![table showing that the correct entry is at slot 3 in the table, but in a scan, the last two values must be checked anyways](/assets/images/sql-optimization/whatsQueryPlan/whatsQueryPlan_4.png)

(green = match) | (red = miss) | (white = not checked)

The second query will use a query plan which implements a sequential seek since the second query handles unique values. Like a scan, a seek will go through each entry and check to see if the condition is met. However unlike a scan, a seek will stop once a matching entry has been found. A seek for ID = 3 would look like the following figure:

![Table showing that with a seek, the last two values of the table can be ignored.](/assets/images/sql-optimization/whatsQueryPlan/whatsQueryPlan_5.png)

(green = match) | (red = miss) | (white = not checked)

This seek only needs to check three rows in order to return the result unlike a scan which must check the entire database.

For more complicated queries there may be situations in which one query plan implements a seek while the other implements a scan. In this case, the query optimizer will choose the query plan that implements a seek, since seeks are more efficient than scans. There are also different types of scans that have different efficiencies in different situations.

**Summary**

* Query plans are a set of instructions generated by the Query Optimizer.
* They generate estimates of query efficiency
* The Query Optimizer generates multiple query plans and determines which plan is most efficient for a given query.
* Scan Vs. Seek
* Scans search the whole database for matches
* Seeks search the database for a single match and stop once they have found it
